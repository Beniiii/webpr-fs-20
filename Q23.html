<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Q23</title>
  </head>
  <body>
    <script>
      /////////
      // Q23 //
      /////////

      // const idPromise = (x) => new Promise((resolve) => resolve(x));
      // idPromise(1)
      //   .then((it) => {
      //     document.writeln(it);
      //     return it;
      //   })
      //   .then((it) => document.writeln(it));
      // --> 1 1

      // const idPromise = (x) => new Promise((resolve) => resolve(x));
      // const writer = (x) => {
      //   document.writeln(x);
      //   return idPromise(x);
      // };
      // idPromise(1)
      //   .then(writer)
      //   .then((it) => it + 1)
      //   .then(writer);
      // --> 1 2

      // const idPromise = (x) => new Promise((resolve) => resolve(x));
      // const writer = (x) => {
      //   document.writeln(x);
      //   return idPromise(x);
      // };
      // const filterEven = (n) => {
      //   if (n % 2 === 0) return n;
      //   else throw Error('not even');
      // };
      // idPromise(1)
      //   .then(writer)
      //   .then(filterEven)
      //   .then(writer)
      //   .catch((err) => {});
      // --> 1

      // const idPromise = (x) => new Promise((resolve) => resolve(x));
      // idPromise(1).then((it) => document.writeln(it));
      // --> 1

      // const idPromise = (x) => new Promise((resolve) => resolve(x));
      // idPromise(1)
      //   .then((it) => it)
      //   .then((it) => document.writeln(it));
      // --> 1

      // const idPromise = (x) => new Promise((resolve) => resolve(x));
      // const writer = (x) => {
      //   document.writeln(x);
      //   return idPromise(x);
      // };
      // idPromise(1)
      //   .then(writer)
      //   .then((it) => document.writeln(it));
      // --> 1 1

      // const idPromise = (x) => new Promise((resolve) => resolve(x));
      // const writer = (x) => {
      //   document.writeln(x);
      //   return idPromise(x);
      // };
      // idPromise(1)
      //   .then(writer)
      //   .then((it) => it + 1)
      //   .then(writer);
      // --> 1 2

      // const idPromise = (x) => new Promise((resolve) => resolve(x));
      // const writer = (x) => {
      //   document.writeln(x);
      //   return idPromise(x);
      // };
      // const inc = (n) => n + 1;
      // const filterEven = (n) => (n % 2 === 0 ? n : undefined);
      // idPromise(1)
      //   .then(writer)
      //   .then(inc)
      //   .then(writer)
      //   .then(filterEven)
      //   .then(writer);
      // --> 1 2 2

      // const idPromise = (x) => new Promise((resolve) => resolve(x));
      // idPromise(1)
      //   .then((it) => {
      //     document.writeln(it);
      //     return idPromise(it);
      //   })
      //   .then((it) => document.writeln(it));
      // --> 1 1

      // const idPromise = (x) => new Promise((resolve) => resolve(x));
      // idPromise(1)
      //   .then((it) => document.writeln(it))
      //   .then((it) => document.writeln(it));
      // --> 1 undefined

      // const idPromise = (x) => new Promise((resolve) => resolve(x));
      // const writer = (x) => {
      //   document.writeln(x);
      //   return idPromise(x);
      // };
      // const filterEven = (n) => (n % 2 === 0 ? n : undefined);
      // idPromise(1).then(writer).then(filterEven).then(writer);
      // --> 1 undefine

      // const idPromise = (x) => new Promise((resolve) => resolve(x));
      // const writer = (x) => {
      //   document.writeln(x);
      //   return idPromise(x);
      // };
      // const filterEven = (n) => (n % 2 === 0 ? n : undefined);
      // idPromise(1).then(writer).then(filterEven).then(writer);
      // --> 1 undefined

      // const idPromise = (x) => new Promise((resolve) => resolve(x));
      // document.writeln(idPromise(1));
      // --> [object promise]

      // const idPromise = (x) => new Promise((resolve) => resolve(x));
      // const writer = (x) => {
      //   document.writeln(x);
      //   return idPromise(x);
      // };
      // const filterEven = (n) => {
      //   if (n % 2 === 0) return n;
      //   else throw Error('not even');
      // };
      // idPromise(1)
      //   .then(writer)
      //   .then(filterEven)
      //   .then(writer)
      //   .catch((err) => {});
      // --> 1

      const x = DataFlowVariable(() => y() * 2);
      let y = DataFlowVariable(() => 1);
      y = DataFlowVariable(() => 2);

      document.writeln(x());
    </script>
  </body>
</html>
